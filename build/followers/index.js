(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var o in l)e.o(l,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:l[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,l=window.wp.element,o=window.wp.components,a=window.wp.data,n=window.wp.blockEditor,r=window.wp.i18n,s=window.React,c=window.wp.apiFetch;var i=e.n(c);function u(e){let{selectedUser:t,followersToShow:o,title:a}=e;const n="site"===t?0:t,[r,c]=(0,s.useState)([]);return(0,s.useEffect)((()=>{i()({path:`/activitypub/1.0/users/${n}/followers?context=view`}).then((e=>c(e))).catch((e=>console.error(e)))}),[n]),(0,l.createElement)("div",{className:"activitypub-follower-block"},(0,l.createElement)("h3",null,a),(0,l.createElement)("ul",null,r&&r.map((e=>(0,l.createElement)("li",{key:e.id},(0,l.createElement)(w,e))))))}function w(e){let{name:t,avatar:o,url:a,handle:n}=e;return(0,l.createElement)("a",{href:a,title:n,onClick:e=>e.preventDefault()},(0,l.createElement)("img",{width:"40",height:"40",src:o,class:"avatar activitypub-avatar"}),(0,l.createElement)("span",{class:"activitypub-actor"},(0,l.createElement)("strong",null,t),(0,l.createElement)("span",{class:"sep"},"/"),n))}(0,t.registerBlockType)("activitypub/followers",{edit:function(e){let{attributes:t,setAttributes:s}=e;const{selectedUser:c,followersToShow:i,title:w}=t,m=(0,a.useSelect)((e=>e("core").getUsers({who:"authors"}))),d=(0,l.useMemo)((()=>m?m.reduce(((e,t)=>(e.push({label:t.name,value:t.id}),e)),[{label:"Whole Site",value:"site"}]):null),[m]);return(0,l.createElement)("div",null,(0,l.createElement)(n.InspectorControls,{key:"setting"},(0,l.createElement)("div",{id:"activitypub-followers-settings"},(0,l.createElement)("fieldset",null,(0,l.createElement)("legend",{className:"blocks-base-control__label"},(0,r.__)("Select User","activitypub")),(0,l.createElement)(o.SelectControl,{label:"Select User",value:c,options:d,onChange:e=>s({selectedUser:e})})),(0,l.createElement)("fieldset",null,(0,l.createElement)("legend",{className:"blocks-base-control__label"},(0,r.__)("Number of Followers to Show","activitypub")),(0,l.createElement)(o.RangeControl,{label:"Number of Followers to Show",value:i,onChange:e=>s({followersToShow:e}),min:1,max:100})))),(0,l.createElement)(u,{selectedUser:c,followersToShow:i}))},save:()=>null})})();