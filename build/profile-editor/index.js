(()=>{"use strict";var e,t={429:(e,t,r)=>{const n=window.wp.element,a=window.wp.domReady;var i=r.n(a);const o=window.wp.components,l=window.wp.i18n,c=window.wp.mediaUtils,u=window.wp.apiFetch;var s=r.n(u);const{namespace:d}=window._activityPubOptions,p={avatar:"",resource:"@well@hello.dolly",name:(0,l.__)("Hello Dolly Fan Account","activitypub"),url:"#"};function v(e){var t,r;if(!e)return p;const n={...p,...e};return n.avatar=null==n||null===(t=n.icon)||void 0===t?void 0:t.url,n.header=null==n||null===(r=n.image)||void 0===r?void 0:r.url,n}function f(e){let{url:t}=e;return(0,n.createElement)("div",{className:"activitypub-profile-editor__avatar"},t&&(0,n.createElement)("img",{src:t,alt:""}))}function m(e){let{url:t,isEditing:r,update:a}=e;const i=(0,n.useRef)();return(0,n.createElement)("div",{className:"activitypub-profile-editor__header"},t&&(0,n.createElement)("img",{src:t,alt:""}),(0,n.createElement)(c.MediaUpload,{title:(0,l.__)("Select or Upload Header","activitypub"),onClose:()=>i.current.blur(),onSelect:e=>a(e.url,e.id),type:"image",value:0,render:e=>{let{open:t}=e;return(0,n.createElement)(o.Button,{ref:i,onClick:t,className:"activitypub-hover-button",isPrimary:!0},(0,l.__)("Upload Header"))}}))}function h(e){let{name:t,update:r}=e;return(0,n.createElement)(o.TextControl,{className:"activitypub-profile-editor__name",value:t,onChange:r})}function y(e){let{description:t}=e;return(0,n.createElement)("div",{className:"activitypub-profile-editor__description"},t&&(0,n.createElement)("div",{dangerouslySetInnerHTML:{__html:t}}))}function b(){const{profile:e,isDirty:t,isLoading:r,error:a,updateProfile:i,saveProfile:l,resetProfile:c}=function(e){const[t,r]=(0,n.useState)(v()),[a,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(null),[c,u]=(0,n.useState)({}),p={...t,...c},f=!!Object.keys(c).length;function m(e){e=v(e),r(e),h()}function h(){u({})}return(0,n.useEffect)((()=>{"number"==typeof e&&(i(!0),function(e){const t={headers:{Accept:"application/activity+json"},path:`/${d}/users/${e}`};return s()(t)}(e).then(m).catch(l).finally((()=>i(!1))))}),[e]),{profile:p,isLoading:a,error:o,updateProfile:function(e,t){const r={...c};r[e]=t,!(arguments.length<=2)&&arguments.length-2&&"avatar"===e&&(r.avatarId=arguments.length<=2?void 0:arguments[2]),u(r)},saveProfile:async function(){i(!0);const t={method:"PUT",headers:{"Content-Type":"application/activity+json"},path:`/${d}/users/${e}`,data:c};return s()(t).then((e=>{m(e)})).catch(l).finally((()=>i(!1)))},resetProfile:h,isDirty:f}}(0),{avatar:u,header:p,name:b,handle:g,summary:w}=e,[E,_]=(0,n.useState)(!1);function O(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return i(e,t,...n)}}return(0,n.createElement)(o.Card,{className:"activitypub-profile-editor"},t&&(0,n.createElement)("div",{className:"activitypub-profile-editor__actions"},(0,n.createElement)(o.Button,{isPrimary:!0,onClick:function(){l(),_(!1)}},"Save"),(0,n.createElement)(o.Button,{onClick:function(){_(!1),c()}},"Cancel")),(0,n.createElement)(m,{url:p,isEditing:E,update:O("header")}),(0,n.createElement)(f,{url:u,isEditing:E,update:O("avatar")}),(0,n.createElement)(h,{name:b,handle:g,isEditing:E,update:O("name")}),(0,n.createElement)(y,{description:w,isEditing:E,update:O("description")}))}i()((()=>{const e=document.getElementById("blog-profile-editor");e&&(0,n.createRoot)(e).render((0,n.createElement)(b,null))}))}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,r,a,i)=>{if(!r){var o=1/0;for(s=0;s<e.length;s++){for(var[r,a,i]=e[s],l=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(l=!1,i<o&&(o=i));if(l){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[r,a,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={446:0,44:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[o,l,c]=r,u=0;if(o.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(c)var s=c(n)}for(t&&t(r);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(s)},r=globalThis.webpackChunkwordpress_activitypub=globalThis.webpackChunkwordpress_activitypub||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[44],(()=>n(429)));a=n.O(a)})();