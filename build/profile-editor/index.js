(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.domReady;var r=e.n(n);const a=window.wp.apiFetch;var i=e.n(a);const l=window.wp.i18n,{namespace:o}=window._activityPubOptions,c={avatar:"",resource:"@well@hello.dolly",name:(0,l.__)("Hello Dolly Fan Account","activitypub"),url:"#"};function u(e){var t,n;if(!e)return c;const r={...c,...e};return r.avatar=null==r||null===(t=r.icon)||void 0===t?void 0:t.url,r.header=null==r||null===(n=r.image)||void 0===n?void 0:n.url,r}function s(e){let{url:n}=e;return(0,t.createElement)("div",{className:"activitypub-profile-editor__avatar"},n&&(0,t.createElement)("img",{src:n,alt:""}))}function d(e){let{url:n}=e;return(0,t.createElement)("div",{className:"activitypub-profile-editor__header"},n&&(0,t.createElement)("img",{src:n,alt:""}))}function p(e){let{name:n,handle:r}=e;return(0,t.createElement)("div",{className:"activitypub-profile-editor__name"},n&&(0,t.createElement)("h1",null,n),r&&(0,t.createElement)("h2",null,r))}function m(e){let{description:n}=e;return(0,t.createElement)("div",{className:"activitypub-profile-editor__description"},n&&(0,t.createElement)("p",null,n))}function f(){const{profile:e,isLoading:n,error:r,updateProfile:a,saveProfile:l,resetProfile:c}=function(e){const[n,r]=(0,t.useState)(u()),[a,l]=(0,t.useState)(!1),[c,s]=(0,t.useState)(null),[d,p]=(0,t.useState)(n),[m,f]=(0,t.useState)(!1);function v(e){e=u(e),r(e)}function y(){v(d),f(!1)}return(0,t.useEffect)((()=>{"number"==typeof e&&(l(!0),function(e){const t={headers:{Accept:"application/activity+json"},path:`/${o}/users/${e}`};return i()(t)}(e).then(v).catch(s).finally((()=>l(!1))))}),[e]),{profile:n,isLoading:a,error:c,updateProfile:function(e,t){n[e]=t,f(!0),v({...n})},saveProfile:function(){const t={method:"PUT",headers:{"Content-Type":"application/activity+json"},path:`/${o}/users/${e}`,data:JSON.stringify(n)};return i()(t).then((e=>{p(u(e)),y()}))},resetProfile:y,isDirty:m}}(0),{avatar:f,header:v,name:y,handle:h,summary:w}=e;return window.profile=e,(0,t.createElement)("div",null,(0,t.createElement)(d,{url:v}),(0,t.createElement)(s,{url:f}),(0,t.createElement)(p,{name:y,handle:h}),(0,t.createElement)(m,{description:w}))}r()((()=>{const e=document.getElementById("blog-profile-editor");e&&(0,t.createRoot)(e).render((0,t.createElement)(f,null))}))})();